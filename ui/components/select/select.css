ui-select{
  --select-border-radius:var(--border-radius-default);
  --select-height:var(--control-height-default);

  --select-padding-inline:16px;
  --select-column-gap:6px;
  --select-icon-size:20px;
  --select-font-size:14px;
  --select-surface-color:var(--surface-color-default);
  --select-surface-color-hover:var(--surface-color-hover);
  --select-surface-color-active:var(--surface-color-active);
  --select-font-color:var(--color-white);

  appearance:none;
  margin:0;
  padding:0;
  background:none;
  border:none;

  cursor:pointer;

  outline-width:var(--outline-focus-width);
  outline-style:var(--outline-focus-style);
  outline-offset:var(--outline-focus-offset);
  outline-color:transparent;

  position:relative;
  display:inline-flex;
  align-items:center;
  height:var(--select-height);
  width:200px;
  padding-inline-start:calc(var(--select-height) / 2)!important;
  padding-inline-end:calc(var(--select-height) / 4 + 2px)!important;
  border-radius:var(--select-border-radius);
  color:var(--select-font-color);
  background-color:var(--select-surface-color);
  overflow:hidden;
  transition-duration:var(--duration-default);
  transition-property:background-color,outline-color;

  &[disabled]{
    cursor:not-allowed;
    opacity:0.5;
    pointer-events:auto;
  }

  &:focus-visible:not([disabled]){
    outline-color:var(--outline-color);
  }

  @media (hover: hover){
    &:hover:not([disabled]){
      background-color:var(--select-surface-color-hover);
    }
  }

  &[expanded]:not([disabled]){
    color:var(--color-white);
    background-color:var(--select-surface-color-hover);
  }

  & [role="textbox"]{
    flex-grow:1;
    padding-inline-end:6px;
    font-size:var(--select-font-size);
    overflow:hidden;
    white-space:nowrap;
    text-overflow:ellipsis;
  }

  & ui-icon{
    width:var(--select-icon-size);
    transition-duration:var(--duration-default);
    transition-property:transform;
  }

  &[aria-expanded="true"] ui-icon{
    transform:rotate(180deg);
  }

  /* shape */
  &[shape="rounded"]{--select-border-radius:var(--border-radius-rounded);}
  &[shape="square"]{--select-border-radius:var(--border-radius-square);}
  &[shape="pill"]{--select-border-radius:var(--border-radius-pill);}
}

[role="listbox"]{
  --listbox-border-radius:var(--border-radius-default);
  --listbox-icon-size:15px;
  --listbox-font-size:13px;
  --listbox-background-color:var(--color-gray-800);
  --listbox-option-background-color-hover:var(--color-gray-650);
  --listbox-option-background-color-selected:var(--color-gray-700);
  --listbox-font-color:var(--color-gray-150);
  --listbox-font-color-hover:var(--color-white);
  --listbox-font-color-active:var(--color-white);
  --listbox-outline-color:var(--color-gray-500);

  position:absolute;
  display:inline-flex;
  flex-direction:column;
  padding:6px;
  border:none;
  border-radius:var(--listbox-border-radius);
  color:var(--listbox-font-color);
  background-color:var(--listbox-background-color);
  z-index:9999;
  animation:fade-slide-in 0.15s ease-out;
  opacity:1;
  transform:translateY(0);
  transition:opacity 0.15s ease-out, transform 0.15s ease-out;

  /* option */
  & > [role="option"]{
    appearance:none;
    cursor:pointer;
    touch-action:manipulation;

    display:flex;
    outline:none;
    border-radius:inherit;
    font-size:var(--listbox-font-size);
    padding:8px 12px;
    transition-duration:var(--transition-duration-default);
    transition-property:background-color,color;

    & > span{
      display:block;
      flex-grow:1;
      overflow:hidden;
      white-space:nowrap;
      text-overflow:ellipsis;
    }

    & > ui-icon{
      height:100%;
      width:var(--listbox-icon-size);
    }

  }


  & [role="option"][aria-disabled="true"]{
    cursor:not-allowed;
    opacity:0.5;
    pointer-events:auto;
  }

  @media (hover: hover){
    & [role="option"]:hover:not([aria-disabled="true"]){
      background-color:var(--listbox-option-background-color-hover);
      color:var(--listbox-font-color-hover);
    }
  }

  & [role="option"][data-active="true"]{
    background-color:var(--listbox-option-background-color-selected);
    color:var(--listbox-font-color-active);
  }

  &[hidden]{
    animation:fade-slide-out 0.15s ease-out;
    opacity:0;
    transform:translateY(-4px);
  }
}

@keyframes fade-slide-in{
  from{
    opacity:0;
    transform:translateY(-4px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}

@keyframes fade-slide-out{
  from{
    opacity:1;
    transform:translateY(0);
  }
  to{
    opacity:0;
    transform:translateY(-4px);
  }
}